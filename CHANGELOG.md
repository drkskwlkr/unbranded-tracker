# Журнал на промените
Този файл отразява всички промени и подобрения по UT. За удобство на четящите, най-новите промени ще бъдат публикувани най-отгоре.

## 2021-12-12
### Нова функционалност
- Добавена е поддръжка за проследяване на товарителници на [Лео Експрес](https://leoexpres.bg).

Също както с тракера за A1, информацията от Лео Експрес е добива чрез сваляне от публично достъпна web страница. Този метод има няколко важни недостатъка: (1) може да бъде бавен; (2) може да бъде блокиран спрямо източника и (3) може да спре да работи във всеки един момент, ако се промени дори минимално HTML кодът на страницата. YMMV (Your Mileage May Vary).

За разлика от тракера на A1 обаче, тракингът на Лео Експрес може да се извършва и през API, което е далеч по-надеждно решение. За целта обаче е необходимо потребителско име и парола за достъп, с каквито не разполагам.

### Промени
Няма.

### Отстранени бъгове
Няма.

### Как да инсталирате
Нужно е да копирате отново три от четирите файла (`config.inc.php`, `track.php` и `style.css`). Като ги презаписвате, най-напред си запазете настройките от предишната версия на `config.inc.php` в частта `# Administrative` и `# Speedy User Details` и след това ги пренесете в новия файл.



## 2021-12-11
### Нова функционалност
- Добавена е поддръжка за проследяване на товарителници на [A1 Post](https://a1post.bg). Тъй като A1 Post използват Deutsche Post, на практика всяка товарителница във UPU формат (XX123456789YY) със страна на произход Германия ще бъде опознавана като товарителница на A1 Post, което може да е проблем за онези от вас, които изпращат пратки по пощата от Германия, но не използват услугите на A1 Post. Сигнализирайте, ако това е така, за да помислим какво може да се направи.
- Следствие от горното, става много лесно да се добави поддръжка за друг вид пощенски пратки, например от Български пощи (XX123456789BG) или други изпращачи, които издават номера по същата схема. Ако ви е необходима такава функционалност, сигнализирайте. Ще ми бъдат нужни няколко валидни номера за проследяване за тестване.

### Промени
- Реализиран е нов механизъм за разпознаване на формата на товарителниците чрез RegEx. Това ще улесни добавянето на допълнителни формати за проследяване в бъдещето.
- Добавен е незадължителен параметър за превключване на езика на UT между български и английски. За да го използвате, трябва да добавите към края на заявката &lang=bg (български) или &lang=en (английски). Ако се изпусне този параметър, страницата ще извлече и покаже статуса на проследяване на езика, който сте задали по подразбиране чрез параметъра `LANGUAGE_DEFAULT` в `config.inc.php`. **Забележка** За момента тази функция засяга само съобщенията от хронологията на самата доставка. Двете съобщения в главата на страницата засеега остават на български. Ако много държите и те да са на английски, редактирайте ги в `track.php`. Многоезичността на модула не ми е приоритет и за собствени цели няма да се занимавам повече с нея.

### Отстранени бъгове
Няма.

### Как да инсталирате
Нужно е да копирате отново три от четирите файла (`config.inc.php`, `track.php` и `style.css`). Като ги презаписвате, най-напред си запазете настройките от предишната версия на `config.inc.php` в частта `# Administrative` и `# Speedy User Details` и след това ги пренесете в новия файл.
